<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=edge"/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="description" content="SSH 证书登录教程 - zzj666's Little Site - 作者:zzj666"/> 
	
    <title>SSH 证书登录教程 - zzj666's Little Site</title>
    <!-- Bootstrap Core CSS -->
    <link href="/css/bootstrap.min.css" rel="stylesheet"/>
    <!-- Custom CSS -->
    <link href="/css/blog.css" rel="stylesheet"/>

    <script src="/js/jquery-1.11.0.js"> </script>
    <!-- Bootstrap Core JavaScript -->
    <script src="/js/bootstrap.min.js"></script>
    <script src="/js/tongji.js"></script>

	<script type="text/x-mathjax-config">
		MathJax.Hub.Config({tex2jax: {inlineMath: [['$','$'], ['\\(','\\)']]}});
	</script>
	<script type="text/javascript" async src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_CHTML">
	</script>

  
  <body>
    <!-- Navigation -->
    <nav class="navbar navbar-inverse navbar-fixed-top" role="navigation">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <div class="navbar-header">
          <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
            <span class="sr-only">
              Toggle navigation
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
            <span class="icon-bar">
            </span>
          </button>
          <a class="navbar-brand" href="/">
            首页
          </a>
        </div>
        <!-- Collect the nav links, forms, and other content for toggling -->
        <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
          		<ul class="nav navbar-nav">
			
				<li>
				  <a href="/sch/index.html">
					学术交流
				  </a>
				</li>
			
				<li>
				  <a href="/eng/index.html">
					工程技术
				  </a>
				</li>
			
				<li>
				  <a href="/cs/index.html">
					信息技术
				  </a>
				</li>
			
				<li>
				  <a href="/other/index.html">
					杂记
				  </a>
				</li>
			
				<li>
				  <a href="/read/index.html">
					书摘
				  </a>
				</li>
			
				<li>
				  <a href="/about.html">
					关于
				  </a>
				</li>
			
		</ul>  
        </div>
        <!-- /.navbar-collapse -->
      </div>
      <!-- /.container -->
    </nav>
    <!-- Page Content -->
    <div class="container">
      <div class="row">
        <!-- Blog Entries Column -->
        <div class="col-md-8">
          



<div  class="post_frame">
<!-- Navi -->
<div class="post_navi">
	<a href="/">首页</a>&nbsp;>&nbsp;
	<a href=""></a>&nbsp;>&nbsp;
	<span class="post_navi_span">正文</span>
</div>

<!-- Title -->
<div class="post_titlearea">
	<h1>SSH 证书登录教程</h1>
	<hr class="hrline"/>
	<div class="post_titledate"/>
		&nbsp;&nbsp;&nbsp;
		栏目：<a href=""></a>&nbsp;&nbsp;&nbsp;
		&nbsp;&nbsp;&nbsp;
		日期：2020-08-11&nbsp;&nbsp;&nbsp;		
	</div>
</div>

<div style="text-indent:2em;padding:10px">
<h1 id="ssh-证书登录教程转">SSH 证书登录教程<script type="math/tex">^{[转]}</script></h1>

<p>SSH 是服务器登录工具，提供密码登录和密钥登录。</p>

<p>但是，SSH 还有第三种登录方法，那就是证书登录。很多情况下，它是更合理、更安全的登录方法，本文就介绍这种登录方法。</p>

<!-- more -->

<h2 id="一非证书登录的缺点">一、非证书登录的缺点</h2>

<p>密码登录和密钥登录，都有各自的缺点。</p>

<p>密码登录需要输入服务器密码，这非常麻烦，也不安全，存在被暴力破解的风险。</p>

<p>密钥登录需要服务器保存用户的公钥，也需要用户保存服务器公钥的指纹。这对于多用户、多服务器的大型机构很不方便，如果有员工离职，需要将他的公钥从每台服务器删除。</p>

<h2 id="二证书登录是什么">二、证书登录是什么？</h2>

<p>证书登录就是为了解决上面的缺点而设计的。它引入了一个证书颁发机构（Certificate1 authority，简称 CA），对信任的服务器颁发服务器证书，对信任的用户颁发用户证书。</p>

<p>登录时，用户和服务器不需要提前知道彼此的公钥，只需要交换各自的证书，验证是否可信即可。</p>

<p>证书登录的主要优点有两个：（1）用户和服务器不用交换公钥，这更容易管理，也具有更好的可扩展性。（2）证书可以设置到期时间，而公钥没有到期时间。针对不同的情况，可以设置有效期很短的证书，进一步提高安全性。</p>

<h2 id="三证书登录的流程">三、证书登录的流程</h2>

<p>SSH 证书登录之前，如果还没有证书，需要生成证书。具体方法是：（1）用户和服务器都将自己的公钥，发给 CA；（2）CA 使用服务器公钥，生成服务器证书，发给服务器；（3）CA 使用用户的公钥，生成用户证书，发给用户。</p>

<p>有了证书以后，用户就可以登录服务器了。整个过程都是 SSH 自动处理，用户无感知。</p>

<p>第一步，用户登录服务器时，SSH 自动将用户证书发给服务器。</p>

<p>第二步，服务器检查用户证书是否有效，以及是否由可信的 CA 颁发。</p>

<p>第三步，SSH 自动将服务器证书发给用户。</p>

<p>第四步，用户检查服务器证书是否有效，以及是否由信任的 CA 颁发。</p>

<p>第五步，双方建立连接，服务器允许用户登录。</p>

<h2 id="四生成-ca-的密钥">四、生成 CA 的密钥</h2>

<p>证书登录的前提是，必须有一个 CA，而 CA 本质上就是一对密钥，跟其他密钥没有不同，CA 就用这对密钥去签发证书。</p>

<p>虽然 CA 可以用同一对密码签发用户证书和服务器证书，但是出于安全性和灵活性，最好用不同的密钥分别签发。所以，CA 至少需要两对密钥，一对是签发用户证书的密钥，假设叫做<code class="highlighter-rouge">user_ca</code>，另一对是签发服务器证书的密钥，假设叫做<code class="highlighter-rouge">host_ca</code>。</p>

<p>使用下面的命令，生成<code class="highlighter-rouge">user_ca</code>。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 生成 CA 签发用户证书的密钥</span>
<span class="nv">$ </span>ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096 <span class="nt">-f</span> ~/.ssh/user_ca <span class="nt">-C</span> user_ca
</code></pre></div>  </div>
</blockquote>

<p>上面的命令会在<code class="highlighter-rouge">~/.ssh</code>目录生成一对密钥：<code class="highlighter-rouge">user_ca</code>（私钥）和<code class="highlighter-rouge">user_ca.pub</code>（公钥）。</p>

<p>这个命令的各个参数含义如下。</p>

<ul>
  <li><code class="highlighter-rouge">-t rsa</code>：指定密钥算法 RSA。</li>
  <li><code class="highlighter-rouge">-b 4096</code>：指定密钥的位数是4096位。安全性要求不高的场合，这个值可以小一点，但是不应小于1024。</li>
  <li><code class="highlighter-rouge">-f ~/.ssh/user_ca</code>：指定生成密钥的位置和文件名。</li>
  <li><code class="highlighter-rouge">-C user_ca</code>：指定密钥的识别字符串，相当于注释，可以随意设置。</li>
</ul>

<p>使用下面的命令，生成<code class="highlighter-rouge">host_ca</code>。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c"># 生成 CA 签发服务器证书的密钥</span>
<span class="nv">$ </span>ssh-keygen <span class="nt">-t</span> rsa <span class="nt">-b</span> 4096 <span class="nt">-f</span> host_ca <span class="nt">-C</span> host_ca
</code></pre></div>  </div>
</blockquote>

<p>上面的命令会在<code class="highlighter-rouge">~/.ssh</code>目录生成一对密钥：<code class="highlighter-rouge">host_ca</code>（私钥）和<code class="highlighter-rouge">host_ca.pub</code>（公钥）。</p>

<p>现在，<code class="highlighter-rouge">~/.ssh</code>目录应该至少有四把密钥。</p>

<ul>
  <li><code class="highlighter-rouge">~/.ssh/user_ca</code></li>
  <li><code class="highlighter-rouge">~/.ssh/user_ca.pub</code></li>
  <li><code class="highlighter-rouge">~/.ssh/host_ca</code></li>
  <li><code class="highlighter-rouge">~/.ssh/host_ca.pub</code></li>
</ul>

<h2 id="五ca-签发服务器证书">五、CA 签发服务器证书</h2>

<p>有了 CA 以后，就可以签发服务器证书了。</p>

<p>签发证书，除了 CA 的密钥以外，还需要服务器的公钥。一般来说，SSH 服务器（通常是<code class="highlighter-rouge">sshd</code>）安装时，已经生成密钥<code class="highlighter-rouge">/etc/ssh/ssh_host_rsa_key</code>了。如果没有的话，可以用下面的命令生成。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>ssh-keygen <span class="nt">-f</span> /etc/ssh/ssh_host_rsa_key <span class="nt">-b</span> 4096 <span class="nt">-t</span> rsa
</code></pre></div>  </div>
</blockquote>

<p>上面命令会在<code class="highlighter-rouge">/etc/ssh</code>目录，生成<code class="highlighter-rouge">ssh_host_rsa_key</code>（私钥）和<code class="highlighter-rouge">ssh_host_rsa_key.pub</code>（公钥）。然后，需要把服务器公钥<code class="highlighter-rouge">ssh_host_rsa_key.pub</code>，复制或上传到 CA 所在的服务器。</p>

<p>上传以后，CA 就可以使用密钥<code class="highlighter-rouge">host_ca</code>为服务器的公钥<code class="highlighter-rouge">ssh_host_rsa_key.pub</code>签发服务器证书。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh-keygen <span class="nt">-s</span> host_ca <span class="nt">-I</span> host.example.com <span class="nt">-h</span> <span class="nt">-n</span> host.example.com <span class="nt">-V</span> +52w ssh_host_rsa_key.pub
</code></pre></div>  </div>
</blockquote>

<p>上面的命令会生成服务器证书<code class="highlighter-rouge">ssh_host_rsa_key-cert.pub</code>（服务器公钥名字加后缀<code class="highlighter-rouge">-cert</code>）。这个命令各个参数的含义如下。</p>

<ul>
  <li><code class="highlighter-rouge">-s</code>：指定 CA 签发证书的密钥。</li>
  <li><code class="highlighter-rouge">-I</code>：身份字符串，可以随便设置，相当于注释，方便区分证书，将来可以使用这个字符串撤销证书。</li>
  <li><code class="highlighter-rouge">-h</code>：指定该证书是服务器证书，而不是用户证书。</li>
  <li><code class="highlighter-rouge">-n host.example.com</code>：指定服务器的域名，表示证书仅对该域名有效。如果有多个域名，则使用逗号分隔。用户登录该域名服务器时，SSH 通过证书的这个值，分辨应该使用哪张证书发给用户，用来证明服务器的可信性。</li>
  <li><code class="highlighter-rouge">-V +52w</code>：指定证书的有效期，这里为52周（一年）。默认情况下，证书是永远有效的。建议使用该参数指定有效期，并且有效期最好短一点，最长不超过52周。</li>
  <li><code class="highlighter-rouge">ssh_host_rsa_key.pub</code>：服务器公钥。</li>
</ul>

<p>生成证书以后，可以使用下面的命令，查看证书的细节。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh-keygen <span class="nt">-L</span> <span class="nt">-f</span> ssh_host_rsa_key-cert.pub
</code></pre></div>  </div>
</blockquote>

<p>最后，为证书设置权限。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">chmod </span>600 ssh_host_rsa_key-cert.pub
</code></pre></div>  </div>
</blockquote>

<h2 id="六ca-签发用户证书">六、CA 签发用户证书</h2>

<p>下面，再用 CA 签发用户证书。这时需要用户的公钥，如果没有的话，客户端可以用下面的命令生成一对密钥。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh-keygen <span class="nt">-f</span> ~/.ssh/user_key <span class="nt">-b</span> 4096 <span class="nt">-t</span> rsa
</code></pre></div>  </div>
</blockquote>

<p>上面命令会在<code class="highlighter-rouge">~/.ssh</code>目录，生成<code class="highlighter-rouge">user_key</code>（私钥）和<code class="highlighter-rouge">user_key.pub</code>（公钥）。</p>

<p>然后，将用户公钥<code class="highlighter-rouge">user_key.pub</code>，上传或复制到 CA 服务器。接下来，就可以使用 CA 的密钥<code class="highlighter-rouge">user_ca</code>为用户公钥<code class="highlighter-rouge">user_key.pub</code>签发用户证书。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh-keygen <span class="nt">-s</span> user_ca <span class="nt">-I</span> user@example.com <span class="nt">-n</span> user <span class="nt">-V</span> +1d user_key.pub
</code></pre></div>  </div>
</blockquote>

<p>上面的命令会生成用户证书<code class="highlighter-rouge">user_key-cert.pub</code>（用户公钥名字加后缀<code class="highlighter-rouge">-cert</code>）。这个命令各个参数的含义如下。</p>

<ul>
  <li><code class="highlighter-rouge">-s</code>：指定 CA 签发证书的密钥</li>
  <li><code class="highlighter-rouge">-I</code>：身份字符串，可以随便设置，相当于注释，方便区分证书，将来可以使用这个字符串撤销证书。</li>
  <li><code class="highlighter-rouge">-n user</code>：指定用户名，表示证书仅对该用户名有效。如果有多个用户名，使用逗号分隔。用户以该用户名登录服务器时，SSH 通过这个值，分辨应该使用哪张证书，证明自己的身份，发给服务器。</li>
  <li><code class="highlighter-rouge">-V +1d</code>：指定证书的有效期，这里为1天，强制用户每天都申请一次证书，提高安全性。默认情况下，证书是永远有效的。</li>
  <li><code class="highlighter-rouge">user_key.pub</code>：用户公钥。</li>
</ul>

<p>生成证书以后，可以使用下面的命令，查看证书的细节。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh-keygen <span class="nt">-L</span> <span class="nt">-f</span> user_key-cert.pub
</code></pre></div>  </div>
</blockquote>

<p>最后，为证书设置权限。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">chmod </span>600 user_key-cert.pub
</code></pre></div>  </div>
</blockquote>

<h2 id="七服务器安装证书">七、服务器安装证书</h2>

<p>CA 生成服务器证书<code class="highlighter-rouge">ssh_host_rsa_key-cert.pub</code>以后，需要将该证书发回服务器，可以使用下面的<code class="highlighter-rouge">scp</code>命令，将证书拷贝过去。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>scp ~/.ssh/ssh_host_rsa_key-cert.pub root@host.example.com:/etc/ssh/
</code></pre></div>  </div>
</blockquote>

<p>然后，将下面一行添加到服务器配置文件<code class="highlighter-rouge">/etc/ssh/sshd_config</code>。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>HostCertificate /etc/ssh/ssh_host_rsa_key-cert.pub
</code></pre></div>  </div>
</blockquote>

<p>上面的代码告诉 sshd，服务器证书是哪一个文件。</p>

<p>重新启动 sshd。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>systemctl restart sshd
<span class="c"># 或者</span>
<span class="nv">$ </span><span class="nb">sudo </span>service sshd restart
</code></pre></div>  </div>
</blockquote>

<h2 id="八服务器安装-ca-公钥">八、服务器安装 CA 公钥</h2>

<p>为了让服务器信任用户证书，必须将 CA 签发用户证书的公钥<code class="highlighter-rouge">user_ca.pub</code>，拷贝到服务器。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>scp ~/.ssh/user_ca.pub root@host.example.com:/etc/ssh/
</code></pre></div>  </div>
</blockquote>

<p>上面的命令，将 CA 签发用户证书的公钥<code class="highlighter-rouge">user_ca.pub</code>，拷贝到 SSH 服务器的<code class="highlighter-rouge">/etc/ssh</code>目录。</p>

<p>然后，将下面一行添加到服务器配置文件<code class="highlighter-rouge">/etc/ssh/sshd_config</code>。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>TrustedUserCAKeys /etc/ssh/user_ca.pub
</code></pre></div>  </div>
</blockquote>

<p>上面的做法是将<code class="highlighter-rouge">user_ca.pub</code>加到<code class="highlighter-rouge">/etc/ssh/sshd_config</code>，这会产生全局效果，即服务器的所有账户都会信任<code class="highlighter-rouge">user_ca</code>签发的所有用户证书。</p>

<p>另一种做法是将<code class="highlighter-rouge">user_ca.pub</code>加到服务器某个账户的<code class="highlighter-rouge">~/.ssh/authorized_keys</code>文件，只让该账户信任<code class="highlighter-rouge">user_ca</code>签发的用户证书。具体方法是打开<code class="highlighter-rouge">~/.ssh/authorized_keys</code>，追加一行，开头是<code class="highlighter-rouge">@cert-authority principals="..."</code>，然后后面加上<code class="highlighter-rouge">user_ca.pub</code>的内容，大概是下面这个样子。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@cert-authority <span class="nv">principals</span><span class="o">=</span><span class="s2">"user"</span> ssh-rsa AAAAB3Nz...XNRM1EX2gQ<span class="o">==</span>
</code></pre></div>  </div>
</blockquote>

<p>上面代码中，<code class="highlighter-rouge">principals="user"</code>指定用户登录的服务器账户名，一般就是<code class="highlighter-rouge">authorized_keys</code>文件所在的账户。</p>

<p>重新启动 sshd。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>systemctl restart sshd
<span class="c"># 或者</span>
<span class="nv">$ </span><span class="nb">sudo </span>service sshd restart
</code></pre></div>  </div>
</blockquote>

<p>至此，SSH 服务器已配置为信任<code class="highlighter-rouge">user_ca</code>签发的证书。</p>

<h2 id="九客户端安装证书">九、客户端安装证书</h2>

<p>客户端安装用户证书很简单，就是从 CA 将用户证书<code class="highlighter-rouge">user_key-cert.pub</code>复制到客户端，与用户的密钥<code class="highlighter-rouge">user_key</code>保存在同一个目录即可。</p>

<h2 id="十客户端安装-ca-公钥">十、客户端安装 CA 公钥</h2>

<p>为了让客户端信任服务器证书，必须将 CA 签发服务器证书的公钥<code class="highlighter-rouge">host_ca.pub</code>，加到客户端的<code class="highlighter-rouge">/etc/ssh/ssh_known_hosts</code>文件（全局级别）或者<code class="highlighter-rouge">~/.ssh/known_hosts</code>文件（用户级别）。</p>

<p>具体做法是打开<code class="highlighter-rouge">ssh_known_hosts</code>或<code class="highlighter-rouge">known_hosts</code>文件，追加一行，开头为<code class="highlighter-rouge">@cert-authority *.example.com</code>，然后将<code class="highlighter-rouge">host_ca.pub</code>文件的内容（即公钥）粘贴在后面，大概是下面这个样子。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>@cert-authority <span class="k">*</span>.example.com ssh-rsa AAAAB3Nz...XNRM1EX2gQ<span class="o">==</span>
</code></pre></div>  </div>
</blockquote>

<p>上面代码中，<code class="highlighter-rouge">*.example.com</code>是域名的模式匹配，表示只要服务器符合该模式的域名，且签发服务器证书的 CA 匹配后面给出的公钥，就都可以信任。如果没有域名限制，这里可以写成<code class="highlighter-rouge">*</code>。如果有多个域名模式，可以使用逗号分隔；如果服务器没有域名，可以用主机名（比如<code class="highlighter-rouge">host1,host2,host3</code>）或者 IP 地址（比如<code class="highlighter-rouge">11.12.13.14,21.22.23.24</code>）。</p>

<p>然后，就可以使用证书，登录远程服务器了。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh <span class="nt">-i</span> ~/.ssh/user_key user@host.example.com
</code></pre></div>  </div>
</blockquote>

<p>上面命令的<code class="highlighter-rouge">-i</code>参数用来指定用户的密钥。如果证书与密钥在同一个目录，则连接服务器时将自动使用该证书。</p>

<h2 id="十一废除证书">十一、废除证书</h2>

<p>废除证书的操作，分成用户证书的废除和服务器证书的废除两种。</p>

<p>服务器证书的废除，用户需要在<code class="highlighter-rouge">known_hosts</code>文件里面，修改或删除对应的<code class="highlighter-rouge">@cert-authority</code>命令的那一行。</p>

<p>用户证书的废除，需要在服务器新建一个<code class="highlighter-rouge">/etc/ssh/revoked_keys</code>文件，然后在配置文件<code class="highlighter-rouge">sshd_config</code>添加一行，内容如下。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>RevokedKeys /etc/ssh/revoked_keys
</code></pre></div>  </div>
</blockquote>

<p><code class="highlighter-rouge">revoked_keys</code>文件保存不再信任的用户公钥，由下面的命令生成。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh-keygen <span class="nt">-kf</span> /etc/ssh/revoked_keys <span class="nt">-z</span> 1 ~/.ssh/user1_key.pub
</code></pre></div>  </div>
</blockquote>

<p>上面命令中，<code class="highlighter-rouge">-z</code>参数用来指定用户公钥保存在<code class="highlighter-rouge">revoked_keys</code>文件的哪一行，这个例子是保存在第1行。</p>

<p>如果以后需要废除其他的用户公钥，可以用下面的命令保存在第2行。</p>

<blockquote>
  <div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nv">$ </span>ssh-keygen <span class="nt">-ukf</span> /etc/ssh/revoked_keys <span class="nt">-z</span> 2 ~/.ssh/user2_key.pub
</code></pre></div>  </div>
</blockquote>

<h2 id="十二参考链接">十二、参考链接</h2>

<ul>
  <li><a href="https://smallstep.com/blog/ssh-emergency-access/">SSH Emergency Access</a>, Carl Tashian</li>
  <li><a href="https://access.redhat.com/documentation/en-us/red_hat_enterprise_linux/6/html/deployment_guide/sec-using_openssh_certificate_authentication">Using OpenSSH Certificate Authentication</a>, Red Hat Enterprise Linux Deployment Guide</li>
  <li><a href="https://gravitational.com/blog/how-to-ssh-properly/">How to SSH Properly</a>, Gus Luxton</li>
</ul>

</div>

<div style="text-align:center">
	<div>
		<b>本文位置：</b><a href="https://zzj666.github.com">zzj666's Little Site</a> » <a href="https://zzj666.github.com/cs/SSH%E8%AF%81%E4%B9%A6%E7%99%BB%E5%BD%95%E6%95%99%E7%A8%8B.html" title="">SSH 证书登录教程</a>
	</div>
</div>


<!-- next and previous -->
<div style="margin:10px">
  <span class="next">
		
			<a href="">
				
			</a>
		 
  </span>
  
  <div style="float:right">
  <span class="prev" >
		
			<a href="">
				
			</a>
		
  </span>
  </div>
  
</div>

<hr>

</div>

        </div>
        <!-- Blog Sidebar Widgets Column -->
        <div class="col-md-4">
          <!-- Side Widget Well -->
          <div class="well">
            <h4>
              资源
            </h4>
			      <div class="row">
                        <div class="col-lg-12">
              <ul class="list-unstyled">
			  	<li>
                <a href="/pub/app/ariang/index.html" target="_blank" rel="nofollow">
                  AriaNg
                </a>
			  	<li>
                <a href="/pub/app/webui-aria2/docs/index.html" target="_blank" rel="nofollow">
                  Webui-Aria2
                </a>
				</li>
				<li>
                <a href="https://www.matheditor.cn/" target="_blank" rel="nofollow">
                  LaTeX公式编辑器1
                </a>
				</li>
				<li>
                <a href="http://www.math.org.cn/tex/index.html" target="_blank" rel="nofollow">
                  LaTeX公式编辑器2
                </a>
				</li>
                <li>
                <a href="/pub/books/math/math/tj_math.html" target="_blank" rel="nofollow">
                  数学基础知识
                </a>
				</li>
				<li>
                <a href="/pub/books/math/fortran/Index.htm" target="_blank" rel="nofollow">
                  Fortran77和90/95编程入门
                </a><br /><i><font size="2">（中国科技大学天文与应用物理系，丁泽军编）</font></i>
				</li>
                <li>
                <a href="/pub/books/gits/git-guide/index.html" target="_blank" rel="nofollow">
                  git - 简易指南
                </a>
				</li>
				<a href="/pub/books/gits/simplegit/index.htm" target="_blank" rel="nofollow">
                  深入浅出Git教程
                </a>（转载）
				</li>
			  </ul>
          </div>
 
            </div>
          </div>

          <!-- Side Widget Well -->
          <div class="well-ad">
            <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
<!-- BlogRightB -->
<ins class="adsbygoogle"
	 style="display:inline-block;width:336px;height:280px"
	 data-ad-client="ca-pub-3557776493079475"
	 data-ad-slot="4042604803"></ins>
<script>
(adsbygoogle = window.adsbygoogle || []).push({});
</script> 
          </div>

		      <!-- Blog Recent Well -->
          <div class="well">
            <h4>
              最新文章
            </h4>
            <div class="row">
                                  
              <div class="col-lg-12">
                <ul class="list-unstyled">
                     
                </ul>
              </div> 
            </div>
          </div>
        </div>
      </div>
      <!-- /.row -->

      <!-- Footer -->
      <footer>
        <div class="row">
          <div class="col-lg-12">
            <div style="text-align:center;margin-top:15px;">
	<a href="https://math2all.github.io">zzj666</a> 小站，由 Jekyll 生成。
	<br />本作品采用<a rel="license" href="http://creativecommons.org/licenses/by/4.0/">知识共享署名 4.0 国际许可协议</a>进行许可。
	<br />除非单独声明。
</div>
 
          </div>
          <!-- /.col-lg-12 -->
        </div>
        <!-- /.row -->
      </footer>
    </div>
    <!-- /.container 
    <script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>
 -->
  </body>

</html>
